<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–≤–∞—Ç–±–∞—Ç–∞ –Ω–∞ –†–µ–≥–∏–Ω–∞ –∏ –ù–∏–∫–æ–ª–∞–π | 06.06.2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        body { font-family: 'Montserrat', sans-serif; overflow-x: hidden; }
        h1, h2, h3, .serif { font-family: 'Playfair Display', serif; }
        html { scroll-behavior: smooth; }

/* –ù–û–í–û: –ï—Ñ–µ–∫—Ç –∑–∞ –ø–ª–∞–≤–Ω–æ –ø–æ—è–≤—è–≤–∞–Ω–µ –Ω–∞ —Å–Ω–∏–º–∫–∞—Ç–∞ */
        .fade-in-element {
            opacity: 0;
            transform: translateY(30px); /* –õ–µ–∫–æ –∏–∑–º–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞–¥–æ–ª—É */
            transition: opacity 1.5s ease-out, transform 1.5s ease-out; /* –ë–∞–≤–Ω–∞ –∞–Ω–∏–º–∞—Ü–∏—è */
        }
        .fade-in-element.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* –ù–û–í–û: –í–∏–Ω—Ç–∏–¥–∂ –µ—Ñ–µ–∫—Ç (–∏–∑–±–ª–µ–¥–Ω—è–≤–∞—â–∏ —Ä—ä–±–æ–≤–µ) */
        .vintage-container {
            position: relative;
            display: inline-block;
            overflow: hidden;
            width: 100%;
            border-radius: 2px;
        }
        /* –°—è–Ω–∫–∞—Ç–∞, –∫–æ—è—Ç–æ –ø—Ä–µ–ª–∏–≤–∞ –∫—ä–º —Ü–≤–µ—Ç–∞ –Ω–∞ —Ñ–æ–Ω–∞ */
        .vintage-container::after {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            /* –°–∏–ª–Ω–∞ –≤—ä—Ç—Ä–µ—à–Ω–∞ —Å—è–Ω–∫–∞ —Å –±–µ–∂–æ–≤ —Ü–≤—è—Ç –æ—Ç —Ç–≤–æ—è—Ç–∞ —Å–Ω–∏–º–∫–∞ - #F2E8D5 */
           box-shadow: inset 0 0 80px 40px #F2E8D5;
            pointer-events: none;
            z-index: 10;
        }
        
        /* –¶–≤–µ—Ç–æ–≤–∞ –ü–∞–ª–∏—Ç—Ä–∞ */
        :root {
            --dark-green: #1A4D2E;
            --bg-color: #F9F7F2;
            --envelope-color: #f4f1ea;
            --flap-color: #e8e2d2;
        }

        /* --- ENVELOPE (FIXED ANIMATION) --- */
        #envelope-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #111; /* Dark background to make envelope pop */
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1.5s ease;
            background-image: url('https://www.transparenttextures.com/patterns/wood-pattern.png');
        }

        .envelope-wrapper {
            position: relative;
            cursor: pointer;
            /* Fixed Aspect Ratio Container */
            width: 320px;
            height: 220px;
            /* Scales up on larger screens */
        }
        @media (min-width: 768px) {
            .envelope-wrapper { width: 480px; height: 320px; }
        }

        .envelope {
            position: relative;
            width: 100%;
            height: 100%;
            background: var(--envelope-color);
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
            border-radius: 4px;
            overflow: visible; /* Changed to visible so flap can rotate out */
        }

        /* Paper Texture */
        .envelope::before {
            content: ''; position: absolute; inset: 0;
            background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');
            opacity: 0.5; pointer-events: none;
        }

        /* The Card Inside - Hidden initially deep inside */
        .card-preview {
            position: absolute;
            background: white;
            width: 90%;
            height: 90%;
            left: 5%;
            top: 50%; /* Starts lower */
            transform: translateY(-40%); /* Centered vertically relative to envelope body */
            z-index: 5;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: transform 1s ease-in-out, opacity 0.5s;
            text-align: center;
            opacity: 0; /* Hidden until open */
        }

        /* Pockets (The visible triangles of the envelope body) */
        .pocket {
            position: absolute;
            width: 0; height: 0;
            z-index: 10;
        }
        .pocket-left {
            border-left: 160px solid #fcfbf9; /* Mobile width/2 */
            border-top: 110px solid transparent;
            border-bottom: 110px solid transparent;
            top: 0; left: 0;
        }
        .pocket-right {
            border-right: 160px solid #fcfbf9;
            border-top: 110px solid transparent;
            border-bottom: 110px solid transparent;
            top: 0; right: 0;
        }
        .pocket-bottom {
            border-bottom: 110px solid var(--envelope-color);
            border-left: 160px solid transparent;
            border-right: 160px solid transparent;
            bottom: 0; left: 0;
            z-index: 11;
        }

        /* Responsive Pockets */
        @media (min-width: 768px) {
            .pocket-left { border-left-width: 240px; border-top-width: 160px; border-bottom-width: 160px; }
            .pocket-right { border-right-width: 240px; border-top-width: 160px; border-bottom-width: 160px; }
            .pocket-bottom { border-bottom-width: 160px; border-left-width: 240px; border-right-width: 240px; }
        }

        /* The Flap (Top Triangle) */
        .flap {
            position: absolute;
            top: 0; left: 0;
            width: 0; height: 0;
            border-top: 115px solid var(--flap-color); /* Slightly taller to overlap */
            border-left: 160px solid transparent;
            border-right: 160px solid transparent;
            transform-origin: top;
            transition: transform 0.8s ease-in-out 0s, z-index 0.2s linear 0.4s; /* z-index changes halfway */
            z-index: 20;
            filter: drop-shadow(0 2px 3px rgba(0,0,0,0.2));
        }
        @media (min-width: 768px) {
            .flap { border-top-width: 170px; border-left-width: 240px; border-right-width: 240px; }
        }

        /* Wax Seal */
        .seal {
            position: absolute;
            top: 115px; /* Matches flap height mobile */
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px; height: 60px;
            background: radial-gradient(circle at 30% 30%, #1A4D2E, #0d2b19);
            border-radius: 50%;
            z-index: 25;
            display: flex;
            align-items: center;
            justify-content: center;
            color: black;
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            font-size: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: opacity 0.4s;
            border: 2px solid rgba(255,255,255,0.1);
        }
        @media (min-width: 768px) {
            .seal { top: 170px; width: 80px; height: 80px; font-size: 28px; }
        }

        /* Animation Classes */
        .open .flap {
            transform: rotateX(180deg);
            z-index: 1; /* Goes behind everything */
        }
        .open .seal {
            opacity: 0;
            pointer-events: none;
        }
        .open .card-preview {
            opacity: 1;
            transform: translateY(-110%); /* Slides UP out of envelope */
            z-index: 15; /* Above pockets */
            transition-delay: 0.4s; /* Wait for flap to open */
        }

        /* --- TIMELINE (RESTORED ELEGANCE) --- */
        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 1px;
            background: #1A4D2E; /* Green line */
            transform: translateX(-50%);
            opacity: 0.3;
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 6rem; /* Spaced out */
            width: 100%;
            opacity: 0;
            transform: translateY(40px);
            transition: all 1s ease-out; /* Slow, elegant fade */
        }
        .timeline-item.visible { opacity: 1; transform: translateY(0); }
        
        /* Alternating Layout */
        .timeline-content-wrapper {
            width: 45%;
        }
        .timeline-item:nth-child(odd) .timeline-content-wrapper { margin-left: auto; text-align: left; padding-left: 2rem; }
        .timeline-item:nth-child(even) .timeline-content-wrapper { margin-right: auto; text-align: right; padding-right: 2rem; }
        
        /* Central Dot */
        .timeline-dot {
            position: absolute;
            left: 50%;
            top: 0;
            transform: translateX(-50%);
            width: 12px;
            height: 12px;
            background: white;
            border: 2px solid #1A4D2E;
            border-radius: 50%;
            z-index: 10;
        }

        /* Time Display */
        .timeline-time-display {
            position: absolute;
            top: -5px;
            width: 45%;
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: #e5e7eb; /* Light gray for elegance */
            font-weight: bold;
        }
        .timeline-item:nth-child(odd) .timeline-time-display { left: 0; text-align: right; padding-right: 2rem; }
        .timeline-item:nth-child(even) .timeline-time-display { right: 0; text-align: left; padding-left: 2rem; }

        @media (max-width: 768px) {
            .timeline-line { left: 20px; }
            .timeline-item { margin-bottom: 4rem; }
            .timeline-dot { left: 20px; }
            .timeline-content-wrapper { width: auto; margin-left: 50px !important; text-align: left !important; padding-left: 0 !important; }
            .timeline-time-display { display: none; } /* Hide big time on mobile */
            .mobile-time { display: block !important; } /* Show inside content */
        }
        .mobile-time { display: none; color: #1A4D2E; font-weight: bold; font-family: 'Playfair Display', serif; margin-bottom: 0.5rem; font-size: 1.2rem; }

        /* --- OTHER STYLES --- */
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(0,0,0,0.05); }
        .playing-animation { animation: pulse-green 2s infinite; }
        @keyframes pulse-green { 0% { box-shadow: 0 0 0 0 rgba(26, 77, 46, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(26, 77, 46, 0); } 100% { box-shadow: 0 0 0 0 rgba(26, 77, 46, 0); } }
        .form-input { width: 100%; background: #F9F7F2; border: 1px solid #e5e7eb; padding: 1rem; outline: none; transition: 0.3s; border-radius: 4px; }
        .form-input:focus { border-color: #1A4D2E; ring: 1px #1A4D2E; }
        .custom-checkbox input:checked + div { background-color: #1A4D2E; border-color: #1A4D2E; }
        .custom-checkbox input:checked + div svg { display: block; }
    </style>
</head>
<body class="bg-[#F9F7F2] text-gray-800 antialiased selection:bg-[#1A4D2E] selection:text-white relative overflow-hidden">

    <!-- === ENVELOPE OVERLAY === -->
    <div id="envelope-overlay">
        <div class="absolute top-10 right-10 z-50 flex gap-4">
            <button onclick="changeLanguage('bg')" class="flex items-center gap-2 bg-white/10 backdrop-blur-md px-4 py-2 rounded-full border border-white/20 hover:bg-white/20 transition group cursor-pointer shadow-lg">
                <img src="https://flagcdn.com/w40/bg.png" alt="BG" class="w-6 h-auto rounded-sm shadow-sm">
                <span class="text-white font-bold text-sm tracking-widest group-hover:underline">BG</span>
            </button>
            <button onclick="changeLanguage('en')" class="flex items-center gap-2 bg-white/10 backdrop-blur-md px-4 py-2 rounded-full border border-white/20 hover:bg-white/20 transition group cursor-pointer shadow-lg">
                <img src="https://flagcdn.com/w40/gb.png" alt="EN" class="w-6 h-auto rounded-sm shadow-sm">
                <span class="text-white font-bold text-sm tracking-widest group-hover:underline">EN</span>
            </button>
        </div>
        <div class="envelope-wrapper" id="envelope-wrapper" onclick="openEnvelope()">
            <div class="envelope">
                <!-- Flap -->
                <div class="flap"></div>
                <!-- Pockets -->
                <div class="pocket pocket-left"></div>
                <div class="pocket pocket-right"></div>
                <div class="pocket pocket-bottom"></div>
                
                <!-- Seal -->
                <div class="seal">R&N</div>

                <!-- Card Inside -->
                <div class="card-preview">
                    <p id="env-names" class="serif text-3xl md:text-4xl text-[#1A4D2E] italic">–†–µ–≥–∏–Ω–∞ & –ù–∏–∫–æ–ª–∞–π</p>
                    <p class="text-xs uppercase mt-2 text-gray-400 tracking-[0.2em]">06.06.2026</p>
                </div>
            </div>
        </div>
        <!-- HIGH VISIBILITY TEXT -->
        <p id="txt-tap" class="text-white text-base md:text-lg mt-16 uppercase tracking-[0.3em] font-bold animate-pulse" style="text-shadow: 0 2px 4px rgba(0,0,0,0.8);">
            –ù–∞—Ç–∏—Å–Ω–µ—Ç–µ –ø–ª–∏–∫–∞
        </p>
    </div>

    <!-- === AUDIO PLAYER === -->
    <div class="fixed bottom-6 left-6 z-50 transition-opacity duration-1000 opacity-0" id="music-control">
        <button id="music-btn" onclick="toggleMusic()" class="bg-[#1A4D2E] text-white p-3 rounded-full shadow-lg hover:bg-[#143d24] transition flex items-center gap-2 playing-animation">
            <span id="music-icon"><i class="fas fa-volume-up"></i></span>
        </button>
        <audio id="bg-music" loop>
            <source src="https://nikolainikolaev.github.io/weding/song.mp3" type="audio/mpeg">
        </audio>
    </div>

    <!-- === NAVIGATION === -->
    <nav class="fixed top-0 w-full z-40 glass shadow-sm transition-all duration-300 opacity-0" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0 flex items-center cursor-pointer" onclick="scrollToTop()">
                    <span class="serif text-2xl font-bold text-gray-900 border-2 border-gray-900 px-2 py-1">R&N</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <button id="nav-program" onclick="navigateTo('section-program')" class="text-gray-600 hover:text-black transition-colors text-xs uppercase tracking-widest font-medium">–ü—Ä–æ–≥—Ä–∞–º–∞</button>
                    <button id="nav-details" onclick="navigateTo('section-details')" class="text-gray-600 hover:text-black transition-colors text-xs uppercase tracking-widest font-medium">–î–µ—Ç–∞–π–ª–∏</button>
                    <button id="nav-rsvp" onclick="navigateTo('section-rsvp')" class="text-gray-600 hover:text-black transition-colors text-xs uppercase tracking-widest font-bold text-[#1A4D2E]">–ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ</button>
                </div>

                
            </div>
        </div>
    </nav>

    <main id="main-content" class="opacity-0 transition-opacity duration-1000">
        
        <!-- === HERO SECTION === -->
        <div id="view-invite">
            <section class="min-h-screen flex flex-col justify-center items-center text-center px-4 relative overflow-hidden">
                <img src="–æ—Å–Ω–æ–≤–∞.jpg" class="absolute top-0 left-0 w-full h-full object-cover z-0">
                
                <div class="absolute top-0 left-0 w-full h-full bg-[#F0EBE0] opacity-50 z-0"></div>
            
                <div class="absolute top-0 left-0 w-full h-full opacity-40 pointer-events-none z-0" style="background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');"></div>
                            
                <div class="z-10 w-full max-w-5xl mx-auto transform transition-all duration-1000 translate-y-10 flex flex-col items-center" id="hero-content">
                    <p id="hero-invite" class="text-xl md:text-2xl uppercase tracking-[0.2em] text-[#1A4D2E] font-bold mb-8 animate-fade-in shadow-sm inline-block px-6 py-2 bg-white/60 rounded-sm">–ö–∞–Ω–∏–º –≤–∏ –Ω–∞ –Ω–∞—à–∞—Ç–∞ —Å–≤–∞—Ç–±–∞</p>
                    
                    <div class="flex flex-col items-center justify-center space-y-2">
                        <h1 id="hero-name-1" class="serif text-6xl md:text-8xl lg:text-9xl text-gray-900 leading-none italic">
                            –†–µ–≥–∏–Ω–∞ <span class="italic text-[#1A4D2E] font-light">&</span>
                        </h1>
                        <h1 id="hero-name-2" class="serif text-6xl md:text-8xl lg:text-9xl text-gray-900 leading-none mt-4 italic">
                            –ù–∏–∫–æ–ª–∞–π
                        </h1>
                    </div>
                    
                    <div class="flex justify-center items-center gap-4 my-10 w-full">
                        <div class="h-px w-16 bg-gray-400"></div>
                        <span id="hero-date" class="text-2xl font-serif italic text-gray-600">06.06.2026 –≥–æ–¥–∏–Ω–∞</span>
                        <div class="h-px w-16 bg-gray-400"></div>
                    </div>

                    <p id="hero-loc" class="text-sm uppercase tracking-widest text-gray-500 font-medium">–ö–æ–º–ø–ª–µ–∫—Å "–•—Ä–∏—Å—Ç–æ–≤–∏", –≥—Ä. –°–µ–≤–ª–∏–µ–≤–æ</p>
                    
                    <div class="grid gap-8 max-w-md mx-auto mt-12 text-gray-800">
                        <div class="flex items-center justify-center gap-6">
                            <div class="text-center">
                                <span id="count-major" class="serif text-5xl font-bold block">--</span>
                                <span id="cnt-months" id="label-major" class="text-xs uppercase tracking-wider text-gray-500">–ú–µ—Å–µ—Ü–∞</span>
                            </div>
                            <div class="text-2xl text-gray-300 font-light">|</div>
                            <div class="text-center">
                                <span id="count-minor" class="serif text-5xl font-bold block">--</span>
                                <span id="cnt-days" id="label-minor" class="text-xs uppercase tracking-wider text-gray-500">–î–Ω–∏</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce cursor-pointer text-[#1A4D2E] z-30" onclick="navigateTo('section-quote')">
                    <i class="fas fa-chevron-down text-2xl"></i>
                </div>
                
                <div class="absolute bottom-0 left-0 w-full h-56 bg-gradient-to-t from-[#F2E8D5] via-[#F2E8D5]/70 to-transparent z-10 pointer-events-none"></div>
            </section>

<!-- === VINTAGE LETTER SECTION (CORRECTED CODE) === -->
            <section id="section-quote" class="relative pb-16 -mt-12 bg-[#F9F7F2] flex justify-center items-center overflow-hidden z-20">
                
                <div class="absolute inset-0 z-10 pointer-events-none" 
                     style="background: radial-gradient(ellipse at center, transparent 60%, rgba(242, 232, 213, 0.8) 90%, #F9F7F2 100%);">
                </div>

                <div class="relative w-full max-w-6xl mx-4 vintage-container fade-in-element shadow-2xl z-0">
                    
                    <img src="paper.jpg" 
                         alt="Hand writing on scroll" 
                         class="w-full h-[450px] md:h-[650px] object-cover rounded-sm relative">
                    
                    <div class="absolute inset-0 flex flex-col items-center justify-center pt-10 pr-10 md:pr-32 pl-10 pb-4 text-center z-20">
                        
                        <p id="quote-text" class="serif text-[21px] md:text-4xl text-[#3E2723] italic leading-relaxed opacity-90 transform -rotate-1" 
                           style="text-shadow: none;">
                            "–õ—é–±–æ–≤—Ç–∞ –µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–æ—Ç–æ –Ω–µ—â–æ,<br>–∫–æ–µ—Ç–æ —Ä–∞—Å—Ç–µ, –∫–æ–≥–∞—Ç–æ —Å–µ —Å–ø–æ–¥–µ–ª—è."
                        </p>
                        
                        <p id="quote-author" class="text-[#3E2723] text-[10px] md:text-xs uppercase tracking-[0.2em] font-bold mt-6 opacity-75 transform -rotate-1">
                            –ê–Ω—Ç–æ–∞–Ω –¥—å–æ –°–µ–Ω—Ç-–ï–∫–∑—é–ø–µ—Ä–∏
                        </p>
                    </div>
                </div>
            </section>

            <!-- Program Section (RESTORED ELEGANCE) -->
            <section id="section-program" class="py-32 bg-white overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-40 bg-gradient-to-b from-[#F9F7F2] to-transparent z-10 pointer-events-none"></div>
                <div class="max-w-6xl mx-auto px-6 relative">
                    <div class="text-center mb-24">
                        <h2 id="prog-title" class="serif text-5xl mt-3 text-gray-900 mb-2">–ü—Ä–æ–≥—Ä–∞–º–∞ –Ω–∞ –¥–µ–Ω—è</h2>
                        <p id="prog-date" class="text-[#1A4D2E] uppercase tracking-widest text-sm font-bold pb-8">06.06.2026 –≥–æ–¥–∏–Ω–∞</p>
                        
                        <div class="inline-block bg-[#F9F7F2] px-8 py-4 border-l-4 border-[#1A4D2E] shadow-sm text-left max-w-xl mx-auto">
                            <p id="prog-welcome" class="text-sm text-gray-700 italic"><i class="fas fa-info-circle text-[#1A4D2E] mr-2"></i>–ì–æ—Å—Ç–∏—Ç–µ —Å–∞ –¥–æ–±—Ä–µ –¥–æ—à–ª–∏ —Å–ª–µ–¥ 11:00 —á–∞—Å–∞ –Ω–∞ –¥–µ–Ω—è, –∑–∞ –¥–∞ —Å–µ –Ω–∞—Å—Ç–∞–Ω—è—Ç –≤ –∫–æ–º–ø–ª–µ–∫—Å–∞.</p>
                        </div>
                    </div>

                    <div class="relative py-10">
                        <div class="timeline-line"></div>

                        <!-- 15:00 (Right) -->
                        <div class="timeline-item flex items-start w-full">
                            <div class="timeline-time-display">15:00</div>
                            <div class="timeline-dot"></div>
                            <div class="timeline-content-wrapper">
                                <div class="mobile-time">15:00</div>
                                <h3 id="ev-bride" class="serif text-3xl text-[#1A4D2E]">–í–∑–∏–º–∞–Ω–µ –Ω–∞ –±—É–ª–∫–∞—Ç–∞</h3>
                                <p id="prog-desc-1" class="text-gray-500 mt-2">–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ –Ω–∞—á–∞–ª–æ –Ω–∞ –ø—Ä–∞–∑–Ω–∏–∫–∞.</p>
                            </div>
                        </div>

                        <!-- 16:30 (Left) -->
                        <div class="timeline-item flex items-start w-full">
                            <div class="timeline-content-wrapper">
                                <div class="mobile-time">16:30</div>
                                <h3 id="ev-ritual" class="serif text-3xl text-[#1A4D2E]">–ò–∑–Ω–µ—Å–µ–Ω —Ä–∏—Ç—É–∞–ª</h3>
                                <p id="prog-desc-2" class="text-gray-500 mt-2">–ó–∞–≤–µ—Ç–Ω–æ—Ç–æ "–î–∞" –ø–æ–¥ –æ—Ç–∫—Ä–∏—Ç–æ –Ω–µ–±–µ.</p>
                            </div>
                            <div class="timeline-dot"></div>
                            <div class="timeline-time-display">16:30</div>
                        </div>

                         <!-- 17:30 (Right) -->
                         <div class="timeline-item flex items-start w-full">
                            <div class="timeline-time-display">17:30</div>
                            <div class="timeline-dot"></div>
                            <div class="timeline-content-wrapper">
                                <div class="mobile-time">17:30</div>
                                <h3 id="ev-drink" class="serif text-3xl text-[#1A4D2E]">Welcome Drink's & –§–æ—Ç–æ</h3>
                                <p id="prog-desc-3" class="text-gray-500 mt-2">–ù–∞–∑–¥—Ä–∞–≤–∏—Ü–∏ –∏ —Å–Ω–∏–º–∫–∏.</p>
                            </div>
                        </div>

                         <!-- 18:30 (Left) -->
                         <div class="timeline-item flex items-start w-full">
                            <div class="timeline-content-wrapper">
                                <div class="mobile-time">18:30</div>
                                <h3 id="ev-accom" class="serif text-3xl text-[#1A4D2E]">–ù–∞—Å—Ç–∞–Ω—è–≤–∞–Ω–µ</h3>
                                <p id="prog-desc-4" class="text-gray-500 mt-2">–í–ª–∏–∑–∞–Ω–µ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—Ç–∞.</p>
                            </div>
                            <div class="timeline-dot"></div>
                            <div class="timeline-time-display">18:30</div>
                        </div>

                        <!-- 19:00 (Right) -->
                         <div class="timeline-item flex items-start w-full">
                            <div class="timeline-time-display">19:00</div>
                            <div class="timeline-dot"></div>
                            <div class="timeline-content-wrapper">
                                <div class="mobile-time">19:00</div>
                                <h3 id="ev-party" class="serif text-3xl text-[#1A4D2E]">–ü–∞—Ä—Ç–∏!</h3>
                                <p id="prog-desc-5" class="text-gray-500 mt-2">"–ó–∞—Ö—Ä–∞–Ω–≤–∞–Ω–µ" –Ω–∞ –º–ª–∞–¥–æ–∂–µ–Ω—Ü–∏—Ç–µ –∏ –Ω–∞—á–∞–ª–æ –Ω–∞ –∫—É–ø–æ–Ω–∞.</p>
                            </div>
                        </div>

                    </div>
                </div>
            </section>

            <!-- Details Section -->
            <section id="section-details" class="py-24 bg-[#F9F7F2]">
                <div class="max-w-6xl mx-auto px-6">
                    <div class="text-center mb-16">
                        <h2 id="details-title" class="serif text-4xl mb-4 text-gray-900">–í–∞–∂–Ω–∞ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
                        <div class="h-px w-16 bg-gray-300 mx-auto"></div>
                    </div>

                    <div class="grid md:grid-cols-3 gap-8">
                        <!-- Location -->
                        <div class="bg-white p-10 rounded-sm shadow-sm hover:shadow-lg transition-all duration-300 text-center border-t-4 border-[#1A4D2E]">
                            <div class="text-3xl mb-4 text-[#1A4D2E]"><i class="fas fa-map-marker-alt"></i></div>
                            <h3 id="loc-title" class="serif text-xl mb-4 font-bold">–õ–æ–∫–∞—Ü–∏—è</h3>
                            <p id="loc-name" class="font-bold text-gray-800 mb-2">–ö–æ–º–ø–ª–µ–∫—Å "–•—Ä–∏—Å—Ç–æ–≤–∏"</p>
                            <p id="loc-desc" class="text-gray-600 text-sm mb-6">–≥—Ä. –°–µ–≤–ª–∏–µ–≤–æ<br>–†–∏—Ç—É–∞–ª—ä—Ç –∏ —Ç—ä—Ä–∂–µ—Å—Ç–≤–æ—Ç–æ —Å–∞ –Ω–∞ –µ–¥–Ω–æ –º—è—Å—Ç–æ.</p>
                            <a id="loc-nav" href="https://maps.google.com/?q=Complex+Hristovi+Sevlievo" target="_blank" class="text-xs uppercase font-bold border-b border-gray-300 pb-1 hover:border-[#1A4D2E] hover:text-[#1A4D2E] transition">–ù–∞–≤–∏–≥–∞—Ü–∏—è</a>
                        </div>

                        <!-- Dress Code -->
                        <div class="bg-white p-10 rounded-sm shadow-sm hover:shadow-lg transition-all duration-300 text-center border-t-4 border-[#1A4D2E]">
                            <div class="text-3xl mb-4 text-[#1A4D2E]"><i class="fas fa-tshirt"></i></div>
                            <h3 id="dress-title class="serif text-xl mb-4 font-bold">–î—Ä–µ—Å –ö–æ–¥: Cocktail Formal</h3>
                            <p id="dress-desc" class="text-gray-600 text-xs italic mb-4 leading-relaxed">–ï–ª–µ–≥–∞–Ω—Ç–Ω–∞ –≤–∏–∑–∏—è, –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –æ—Ñ–∏—Ü–∏–∞–ª–Ω–æ –∏ –ø–∞—Ä—Ç–∏ –æ–±–ª–µ–∫–ª–æ. –ö–æ–∫—Ç–µ–π–ª–Ω–∏ —Ä–æ–∫–ª–∏ –∏ –∫–æ—Å—Ç—é–º–∏.</p>
                            <p id="dress-warn" class="text-red-800/70 font-bold text-xs mb-4 uppercase tracking-wide border border-red-100 bg-red-50 py-2">‚ö†Ô∏è –ú–æ–ª–∏–º –¥–∞ –Ω–µ –Ω–æ—Å–∏—Ç–µ –∂—ä–ª—Ç–æ</p>
                            <div class="flex justify-center gap-3 mt-4">
                                <div class="w-6 h-6 rounded-full bg-black border border-gray-200" title="Black"></div>
                                <div class="w-6 h-6 rounded-full bg-[#1A4D2E] border border-gray-200" title="Dark Green"></div>
                                <div class="w-6 h-6 rounded-full bg-[#808080] border border-gray-200" title="Grey"></div>
                                <div class="w-6 h-6 rounded-full bg-[#F5F5DC] border border-gray-300" title="Milky White"></div>
                            </div>
                        </div>

                         <!-- No Flowers Policy -->
                         <div class="bg-white p-10 rounded-sm shadow-sm hover:shadow-lg transition-all duration-300 text-center border-t-4 border-[#1A4D2E]">
                            <div class="text-3xl mb-4 text-[#1A4D2E]"><i class="fas fa-leaf"></i></div>
                            <h3 id="flowers-title" class="serif text-xl mb-4 font-bold">–ú–æ–ª–±–∞: –ë–µ–∑ –¶–≤–µ—Ç—è</h3>
                            <p id="flowers-desc" class="text-gray-600 text-sm leading-relaxed italic">
                                "–í–∞—à–µ—Ç–æ –ø—Ä–∏—Å—ä—Å—Ç–≤–∏–µ –µ –Ω–∞–π-–≥–æ–ª–µ–º–∏—è—Ç –ø–æ–¥–∞—Ä—ä–∫ –∑–∞ –Ω–∞—Å! –¢—ä–π –∫–∞—Ç–æ —Å–º–µ –æ—Å–∏–≥—É—Ä–∏–ª–∏ –∫—Ä–∞—Å–∏–≤–∞ —Ü–≤–µ—Ç–Ω–∞ —É–∫—Ä–∞—Å–∞ –∑–∞ –ø—Ä–∞–∑–Ω–∏–∫–∞, —â–µ –±—ä–¥–µ–º –ø—Ä–∏–∑–Ω–∞—Ç–µ–ª–Ω–∏, –∞–∫–æ –∑–∞–º–µ–Ω–∏—Ç–µ –±—É–∫–µ—Ç–∏—Ç–µ —Å –ø–æ–¥–∫—Ä–µ–ø–∞ –∑–∞ –Ω–∞—à–µ—Ç–æ –±—ä–¥–µ—â–µ –∫—ä–º –ø–æ–¥–∞—Ä—ä–∫–∞ –≤–∏. –ù–µ–∫–∞ –∑–∞–ø–∞–∑–∏–º –∫—Ä–∞—Å–æ—Ç–∞—Ç–∞ –Ω–∞ –∂–∏–≤–∏—Ç–µ —Ü–≤–µ—Ç—è –≤ –ø—Ä–∏—Ä–æ–¥–∞—Ç–∞."
                            </p>
                        </div>
                    </div>
                </div>
            </section>

        <section class="relative py-12 bg-white flex justify-center items-center overflow-hidden">
                <div class="relative w-full max-w-6xl mx-auto h-auto">
                    
                    <img src="—Å–Ω–∏–º–∫–∞.jpg" alt="Together" class="w-full h-auto object-contain rounded-sm shadow-lg">
                    
                    <div class="absolute inset-0 bg-white/15 z-10"></div>

                    <div class="absolute inset-0 z-20 pointer-events-none" 
                         style="background: radial-gradient(ellipse at center, transparent 40%, rgba(255, 255, 255, 0.8) 80%, #ffffff 100%);">
                    </div>

                    <div class="absolute inset-0 flex items-center justify-center z-30 px-6 text-center">
                        <p id="photo-quote" class="serif text-xl md:text-4xl text-[#3E2723] italic leading-relaxed drop-shadow-md" 
                           style="text-shadow: 0 1px 15px rgba(255,255,255,0.9);">
                            "–ò–∑–º–∏–Ω–∞—Ö–º–µ –Ω–µ –º–∞–ª–∫–∞ —á–∞—Å—Ç –æ—Ç –∂–∏–≤–æ—Ç–∞ —Å–∏ –∑–∞–µ–¥–Ω–æ, <br class="hidden md:block">
                            —â–µ —Å–µ —Ä–∞–¥–≤–∞–º–µ –¥–∞ —Å–ø–æ–¥–µ–ª–∏—Ç–µ —Ç–∞–∑–∏ "—Å–ø–∏—Ä–∫–∞" –æ—Ç –Ω–µ–≥–æ, –∑–∞–µ–¥–Ω–æ —Å –Ω–∞—Å!"
                        </p>
                    </div>
                </div>
            </section>
            
            <!-- RSVP Section -->
            <section id="section-rsvp" class="py-24 bg-white relative border-t border-gray-100">
                <div class="max-w-xl mx-auto px-6 text-center">
                    <h2 id="rsvp-title" class="serif text-4xl mb-4 text-gray-900">–û—á–∞–∫–≤–∞–º–µ –í–∏!</h2>
                    <p id="rsvp-deadline" class="text-gray-600 mb-8">–ö—Ä–∞–µ–Ω —Å—Ä–æ–∫ –∑–∞ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ: <br><strong>1-–≤–∏ –ê–ø—Ä–∏–ª 2026 –≥–æ–¥–∏–Ω–∞</strong></p>
                    
                    <form id="rsvp-form" class="space-y-6 text-left bg-[#F9F7F2] p-8 rounded shadow-inner">
                        <div>
                            <label id="lbl-guests" class="block text-xs font-bold uppercase tracking-wider text-gray-500 mb-2">–ë—Ä–æ–π –ì–æ—Å—Ç–∏ (–≤—ä–∑—Ä–∞—Å—Ç–Ω–∏)</label>
                            <select id="guest-count" onchange="generateNameFields()" class="form-input">
                                <option id="opt-g1" value="1">1 –ß–æ–≤–µ–∫</option>
                                <option id="opt-g2" value="2">2 –î—É—à–∏</option>
                                <option id="opt-g3" value="3">3 –î—É—à–∏</option>
                                <option id="opt-g4" value="4">4 –î—É—à–∏</option>
                                <option id="opt-g5" value="5">5 –î—É—à–∏</option>
                            </select>
                        </div>
                        <div id="names-container" class="space-y-3">
                            <div><label id="lbl-name" class="block text-xs font-bold uppercase tracking-wider text-gray-500 mb-2">–ò–º–µ –Ω–∞ –≥–æ—Å—Ç 1</label><input type="text" class="form-input guest-name-input" placeholder="–ò–º–µ –∏ –§–∞–º–∏–ª–∏—è" required></div>
                        </div>
                        <div>
                            <label id="lbl-attend" class="block text-xs font-bold uppercase tracking-wider text-gray-500 mb-2">–ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ</label>
                            <select id="attendance-select" class="form-input" required>
                                <option id="opt-yes" value="yes">–° —Ä–∞–¥–æ—Å—Ç —â–µ –ø—Ä–∏—Å—ä—Å—Ç–≤–∞–º–µ! ü•Ç</option>
                                <option id="opt-no" value="no">–ó–∞ —Å—ä–∂–∞–ª–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ–º üòû</option>
                            </select>
                        </div>

                        <!-- Menu (Vegan -> Vegetarian) -->
                        <div id="meal-preference" class="transition-all duration-300">
                            <label id="lbl-menu" class="block text-xs font-bold uppercase tracking-wider text-gray-500 mb-2">–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–Ω–∏–µ –∑–∞ –º–µ–Ω—é</label>
                            <div class="grid grid-cols-2 gap-4">
                                <button id="btn-meat" type="button" class="meal-btn p-3 rounded-md border border-gray-200 text-sm bg-white hover:bg-[#1A4D2E] hover:text-white transition" onclick="selectMeal(this, 'meat')">ü•© –ú–µ—Å–Ω–æ</button>
                                <button id="btn-veg" type="button" class="meal-btn p-3 rounded-md border border-gray-200 text-sm bg-white hover:bg-[#1A4D2E] hover:text-white transition" onclick="selectMeal(this, 'veg')">ü•ó –í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–æ</button>
                            </div>
                        </div>

                        <!-- Allergies -->
                        <div class="mt-4">
                            <label id="lbl-allergies" class="block text-xs font-bold uppercase tracking-wider text-gray-500 mb-3">–•—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ –ê–ª–µ—Ä–≥–∏–∏</label>
                            <div class="grid grid-cols-2 gap-3 mb-3">
                                <label class="custom-checkbox flex items-center cursor-pointer space-x-2"><input type="checkbox" value="–ì–ª—É—Ç–µ–Ω" class="hidden allergy-check"><div class="w-5 h-5 flex items-center justify-center border border-gray-300 rounded bg-white transition-colors"><svg class="w-3 h-3 text-white hidden pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg></div><span id="al-gluten" class="text-sm text-gray-600">–ì–ª—É—Ç–µ–Ω</span></label>
                                <label class="custom-checkbox flex items-center cursor-pointer space-x-2"><input type="checkbox" value="–õ–∞–∫—Ç–æ–∑–∞" class="hidden allergy-check"><div class="w-5 h-5 flex items-center justify-center border border-gray-300 rounded bg-white transition-colors"><svg class="w-3 h-3 text-white hidden pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg></div><span id="al-lactose" class="text-sm text-gray-600">–õ–∞–∫—Ç–æ–∑–∞</span></label>
                                <label class="custom-checkbox flex items-center cursor-pointer space-x-2"><input type="checkbox" value="–Ø–¥–∫–∏" class="hidden allergy-check"><div class="w-5 h-5 flex items-center justify-center border border-gray-300 rounded bg-white transition-colors"><svg class="w-3 h-3 text-white hidden pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg></div><span id="al-nuts" class="text-sm text-gray-600">–Ø–¥–∫–∏</span></label>
                                <label class="custom-checkbox flex items-center cursor-pointer space-x-2"><input type="checkbox" value="–ú–æ—Ä—Å–∫–∏" class="hidden allergy-check"><div class="w-5 h-5 flex items-center justify-center border border-gray-300 rounded bg-white transition-colors"><svg class="w-3 h-3 text-white hidden pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg></div><span id="al-sea" class="text-sm text-gray-600">–ú–æ—Ä—Å–∫–∏ –¥–∞—Ä–æ–≤–µ</span></label>
                            </div>
                            <input id="input-other" type="text" id="allergy-other" class="form-input text-sm" placeholder="–î—Ä—É–≥–∏ (–º–æ–ª—è —É—Ç–æ—á–Ω–µ—Ç–µ)...">
                        </div>

                        <div class="mt-4">
                            <label id="lbl-photos" class="block text-xs font-bold uppercase tracking-wider text-[#1A4D2E] mb-2">–ñ–µ–ª–∞–µ—Ç–µ –ª–∏ —Å–Ω–∏–º–∫–∏ –æ—Ç —Å–≤–∞—Ç–±–∞—Ç–∞?</label>
                            <input type="email" id="photo-email" class="form-input text-sm" placeholder="–ú–æ–ª—è, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–µ—Ç–µ –∏–º–µ–π–ª –∞–¥—Ä–µ—Å, –Ω–∞ –∫–æ–π—Ç–æ –¥–∞ –≥–∏ –∏–∑–ø—Ä–∞—Ç–∏–º.">
                        </div>
                        
                        <div id="wishes-section">
                            <label id="lbl-wishes" class="block text-xs font-bold uppercase tracking-wider text-[#1A4D2E] mb-2">–ü–æ–∂–µ–ª–∞–Ω–∏—è –∫—ä–º –º–ª–∞–¥–æ–∂–µ–Ω—Ü–∏—Ç–µ</label>
                            <textarea id="input-msg" id="guest-message" class="w-full bg-white border border-gray-300 rounded-md p-4 focus:ring-2 focus:ring-[#1A4D2E] outline-none transition h-32 text-sm" placeholder="–í–∞—à–µ—Ç–æ —Å—ä–æ–±—â–µ–Ω–∏–µ —Ç—É–∫..."></textarea>
                        </div>
                        <button id="btn-send" type="submit" class="w-full bg-[#1A4D2E] text-white font-bold uppercase tracking-widest py-4 rounded hover:bg-[#143d24] transition duration-300 shadow-lg mt-4">–ò–∑–ø—Ä–∞—Ç–∏ –ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ</button>
                    </form>

                    <div id="rsvp-success" class="hidden mt-8 p-6 bg-white border border-[#1A4D2E] rounded-lg">
                        <h3 id="success-title" class="serif text-2xl mb-2 text-[#1A4D2E]">–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –≤–∏!</h3>
                        <p class="text-sm text-gray-600">–í–∞—à–∏—è—Ç –æ—Ç–≥–æ–≤–æ—Ä –±–µ—à–µ –∏–∑–ø—Ä–∞—Ç–µ–Ω —É—Å–ø–µ—à–Ω–æ –¥–æ –º–ª–∞–¥–æ–∂–µ–Ω—Ü–∏—Ç–µ.</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- === AI CHAT === -->
        <div class="fixed bottom-6 right-6 z-40 flex flex-col items-end gap-2" id="ai-widget-container">
            <div id="ai-chat-window" class="hidden w-80 bg-white rounded-xl shadow-2xl border border-gray-100 overflow-hidden flex flex-col transition-all duration-300 origin-bottom-right mb-2">
                <div class="bg-[#1A4D2E] p-4 text-white flex justify-between items-center"><div><h4 id="chat-title" class="font-bold text-sm">–°–≤–∞—Ç–±–µ–Ω –ê—Å–∏—Å—Ç–µ–Ω—Ç</h4></div><button onclick="toggleChat()" class="text-white hover:text-gray-300">‚úï</button></div>
                <div id="chat-messages" class="h-64 p-4 overflow-y-auto bg-gray-50 space-y-3 text-sm"><div id="chat-init" class="bg-white p-3 rounded-lg rounded-tl-none shadow-sm border border-gray-100 self-start max-w-[90%]">–ó–¥—Ä–∞–≤–µ–π—Ç–µ! –ò–º–∞—Ç–µ –ª–∏ –≤—ä–ø—Ä–æ—Å–∏?</div></div>
                <div class="p-3 bg-white border-t border-gray-100"><form onsubmit="handleChatSubmit(event)" class="flex gap-2"><input type="text" id="chat-input" class="flex-1 bg-gray-100 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#1A4D2E]" placeholder="–í—ä–ø—Ä–æ—Å..."><button type="submit" class="bg-[#1A4D2E] text-white p-2 rounded-full w-9 h-9 flex items-center justify-center hover:bg-[#143d24] transition">‚ûú</button></form></div>
            </div>
            <!-- CONCIERGE TEXT BUTTON -->
            <button onclick="toggleChat()" class="bg-white text-[#1A4D2E] px-6 py-4 rounded-full shadow-lg border border-[#1A4D2E]/20 hover:shadow-xl hover:scale-105 transition flex items-center gap-2 group">
             <span id="btn-concierge" class="serif font-bold tracking-wide text-[#1A4D2E]" style="-webkit-text-stroke: 0.3px black;">–°–≤–∞—Ç–±–µ–Ω –ö–æ–Ω—Å–∏–µ—Ä–∂</span>
            </button>
        </div>

        <!-- === DEV MODE === -->
        <div id="view-report" class="hidden bg-gray-900 min-h-screen text-gray-300 p-6 md:p-12"><div class="max-w-7xl mx-auto"><h2 class="text-3xl font-mono text-white mb-8">üîß Admin Dashboard</h2><div class="grid grid-cols-1 lg:grid-cols-2 gap-8"><div class="bg-gray-800 p-6 rounded-lg border border-gray-700"><h3 class="text-xl font-bold text-white mb-4 font-mono">RSVP Status</h3><div class="h-64"><canvas id="rsvpChart"></canvas></div></div><div class="bg-gray-800 p-6 rounded-lg border border-gray-700"><h3 class="text-xl font-bold text-white mb-4 font-mono">üíç AI Vow Writer</h3><input type="text" id="vow-topic" class="w-full bg-gray-900 border border-gray-700 rounded p-2 text-sm text-white mb-2" placeholder="Topic..."><button onclick="generateVows()" class="w-full bg-[#1A4D2E] text-white font-bold py-2 rounded">Generate</button><div id="vow-output" class="mt-4 text-sm italic text-gray-400">Result here...</div></div></div></div></div>

    </main>

    <footer class="bg-[#1A4D2E] text-white py-12 text-center" id="footer">
        <h2 id="footer-names" class="serif text-4xl mb-4">–†–µ–≥–∏–Ω–∞ & –ù–∏–∫–æ–ª–∞–π</h2>
        <p id="footer-loc" class="text-sm text-gray-300 uppercase tracking-widest mb-8">06.06.2026 ‚Ä¢ –°–µ–≤–ª–∏–µ–≤–æ</p>
    </footer>

    <script>
        // === 1. –°–ò–°–¢–ï–ú–ê –ó–ê –ï–ó–ò–¶–ò –ò –ü–†–ï–í–û–î–ò ===
        const translations = {
            'bg': {
                // –¢–µ–∫—Å—Ç–æ–≤–µ
                'txt-tap': '–ù–∞—Ç–∏—Å–Ω–µ—Ç–µ –ø–ª–∏–∫–∞',
                'nav-program': '–ü—Ä–æ–≥—Ä–∞–º–∞', 'nav-details': '–î–µ—Ç–∞–π–ª–∏', 'nav-rsvp': '–ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ',
                'env-names': '–†–µ–≥–∏–Ω–∞ & –ù–∏–∫–æ–ª–∞–π',
                'hero-invite': '–ö–∞–Ω–∏–º –≤–∏ –Ω–∞ –Ω–∞—à–∞—Ç–∞ —Å–≤–∞—Ç–±–∞',
                'hero-name-1': '–†–µ–≥–∏–Ω–∞ <span class="italic text-[#1A4D2E] font-light">&</span>',
                'hero-name-2': '–ù–∏–∫–æ–ª–∞–π',
                'hero-date': '06.06.2026 –≥–æ–¥–∏–Ω–∞',
                'hero-loc': '–ö–æ–º–ø–ª–µ–∫—Å "–•—Ä–∏—Å—Ç–æ–≤–∏", –≥—Ä. –°–µ–≤–ª–∏–µ–≤–æ',
                'cnt-months': '–ú–µ—Å–µ—Ü–∞', 'cnt-days': '–î–Ω–∏',
                
                // –ü—Ä–æ–≥—Ä–∞–º–∞
                'prog-title': '–ü—Ä–æ–≥—Ä–∞–º–∞ –Ω–∞ –¥–µ–Ω—è',
                'prog-date': '06.06.2026 –≥–æ–¥–∏–Ω–∞',
                'prog-welcome': '<i class="fas fa-info-circle text-[#1A4D2E] mr-2"></i>–ì–æ—Å—Ç–∏—Ç–µ —Å–∞ –¥–æ–±—Ä–µ –¥–æ—à–ª–∏ —Å–ª–µ–¥ 11:00 —á–∞—Å–∞ –Ω–∞ –¥–µ–Ω—è, –∑–∞ –¥–∞ —Å–µ –Ω–∞—Å—Ç–∞–Ω—è—Ç –≤ –∫–æ–º–ø–ª–µ–∫—Å–∞.',
                'ev-bride': '–í–∑–∏–º–∞–Ω–µ –Ω–∞ –±—É–ª–∫–∞—Ç–∞', 'prog-desc-1': '–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ –Ω–∞—á–∞–ª–æ –Ω–∞ –ø—Ä–∞–∑–Ω–∏–∫–∞.',
                'ev-ritual': '–ò–∑–Ω–µ—Å–µ–Ω —Ä–∏—Ç—É–∞–ª', 'prog-desc-2': '–ó–∞–≤–µ—Ç–Ω–æ—Ç–æ "–î–∞" –ø–æ–¥ –æ—Ç–∫—Ä–∏—Ç–æ –Ω–µ–±–µ.',
                'ev-drink': "Welcome Drink's & –§–æ—Ç–æ", 'prog-desc-3': '–ù–∞–∑–¥—Ä–∞–≤–∏—Ü–∏ –∏ —Å–Ω–∏–º–∫–∏.',
                'ev-accom': '–ù–∞—Å—Ç–∞–Ω—è–≤–∞–Ω–µ', 'prog-desc-4': '–í–ª–∏–∑–∞–Ω–µ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—Ç–∞.',
                'ev-party': '–ü–∞—Ä—Ç–∏!', 'prog-desc-5': '"–ó–∞—Ö—Ä–∞–Ω–≤–∞–Ω–µ" –Ω–∞ –º–ª–∞–¥–æ–∂–µ–Ω—Ü–∏—Ç–µ –∏ –Ω–∞—á–∞–ª–æ –Ω–∞ –∫—É–ø–æ–Ω–∞.',
                
                // –¶–∏—Ç–∞—Ç–∏
                'quote-text': '"–õ—é–±–æ–≤—Ç–∞ –µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–æ—Ç–æ –Ω–µ—â–æ,<br>–∫–æ–µ—Ç–æ —Ä–∞—Å—Ç–µ, –∫–æ–≥–∞—Ç–æ —Å–µ —Å–ø–æ–¥–µ–ª—è."',
                'quote-author': '–ê–Ω—Ç–æ–∞–Ω –¥—å–æ –°–µ–Ω—Ç-–ï–∫–∑—é–ø–µ—Ä–∏',
                'photo-quote': '"–ò–∑–º–∏–Ω–∞—Ö–º–µ –Ω–µ –º–∞–ª–∫–∞ —á–∞—Å—Ç –æ—Ç –∂–∏–≤–æ—Ç–∞ —Å–∏ –∑–∞–µ–¥–Ω–æ, <br class="hidden md:block">—â–µ —Å–µ —Ä–∞–¥–≤–∞–º–µ –¥–∞ —Å–ø–æ–¥–µ–ª–∏—Ç–µ —Ç–∞–∑–∏ "—Å–ø–∏—Ä–∫–∞" –æ—Ç –Ω–µ–≥–æ, –∑–∞–µ–¥–Ω–æ —Å –Ω–∞—Å!"',

                // –î–µ—Ç–∞–π–ª–∏
                'details-title': '–í–∞–∂–Ω–∞ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è',
                'loc-title': '–õ–æ–∫–∞—Ü–∏—è', 'loc-name': '–ö–æ–º–ø–ª–µ–∫—Å "–•—Ä–∏—Å—Ç–æ–≤–∏"', 
                'loc-desc': '–≥—Ä. –°–µ–≤–ª–∏–µ–≤–æ<br>–†–∏—Ç—É–∞–ª—ä—Ç –∏ —Ç—ä—Ä–∂–µ—Å—Ç–≤–æ—Ç–æ —Å–∞ –Ω–∞ –µ–¥–Ω–æ –º—è—Å—Ç–æ.', 'loc-nav': '–ù–∞–≤–∏–≥–∞—Ü–∏—è',
                'dress-title': '–î—Ä–µ—Å –ö–æ–¥: Cocktail Formal',
                'dress-desc': '–ï–ª–µ–≥–∞–Ω—Ç–Ω–∞ –≤–∏–∑–∏—è, –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –æ—Ñ–∏—Ü–∏–∞–ª–Ω–æ –∏ –ø–∞—Ä—Ç–∏ –æ–±–ª–µ–∫–ª–æ. –ö–æ–∫—Ç–µ–π–ª–Ω–∏ —Ä–æ–∫–ª–∏ –∏ –∫–æ—Å—Ç—é–º–∏.',
                'dress-warn': '‚ö†Ô∏è –ú–æ–ª–∏–º –¥–∞ –Ω–µ –Ω–æ—Å–∏—Ç–µ –∂—ä–ª—Ç–æ',
                'flowers-title': '–ú–æ–ª–±–∞: –ë–µ–∑ –¶–≤–µ—Ç—è',
                'flowers-desc': '"–í–∞—à–µ—Ç–æ –ø—Ä–∏—Å—ä—Å—Ç–≤–∏–µ –µ –Ω–∞–π-–≥–æ–ª–µ–º–∏—è—Ç –ø–æ–¥–∞—Ä—ä–∫ –∑–∞ –Ω–∞—Å! –¢—ä–π –∫–∞—Ç–æ —Å–º–µ –æ—Å–∏–≥—É—Ä–∏–ª–∏ –∫—Ä–∞—Å–∏–≤–∞ —Ü–≤–µ—Ç–Ω–∞ —É–∫—Ä–∞—Å–∞ –∑–∞ –ø—Ä–∞–∑–Ω–∏–∫–∞, —â–µ –±—ä–¥–µ–º –ø—Ä–∏–∑–Ω–∞—Ç–µ–ª–Ω–∏, –∞–∫–æ –∑–∞–º–µ–Ω–∏—Ç–µ –±—É–∫–µ—Ç–∏—Ç–µ —Å –ø–æ–¥–∫—Ä–µ–ø–∞ –∑–∞ –Ω–∞—à–µ—Ç–æ –±—ä–¥–µ—â–µ –∫—ä–º –ø–æ–¥–∞—Ä—ä–∫–∞ –≤–∏. –ù–µ–∫–∞ –∑–∞–ø–∞–∑–∏–º –∫—Ä–∞—Å–æ—Ç–∞—Ç–∞ –Ω–∞ –∂–∏–≤–∏—Ç–µ —Ü–≤–µ—Ç—è –≤ –ø—Ä–∏—Ä–æ–¥–∞—Ç–∞."',
                
                // RSVP
                'rsvp-title': '–û—á–∞–∫–≤–∞–º–µ –í–∏!',
                'rsvp-deadline': '–ö—Ä–∞–µ–Ω —Å—Ä–æ–∫ –∑–∞ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ: <br><strong>1-–≤–∏ –ê–ø—Ä–∏–ª 2026 –≥–æ–¥–∏–Ω–∞</strong>',
                'lbl-guests': '–ë—Ä–æ–π –ì–æ—Å—Ç–∏ (–≤—ä–∑—Ä–∞—Å—Ç–Ω–∏)', 'lbl-name': '–ò–º–µ –Ω–∞ –≥–æ—Å—Ç 1',
                'lbl-attend': '–ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ', 'lbl-menu': '–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–Ω–∏–µ –∑–∞ –º–µ–Ω—é',
                'lbl-allergies': '–•—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ –ê–ª–µ—Ä–≥–∏–∏', 'lbl-wishes': '–ü–æ–∂–µ–ª–∞–Ω–∏—è –∫—ä–º –º–ª–∞–¥–æ–∂–µ–Ω—Ü–∏—Ç–µ',
                'btn-send': '–ò–∑–ø—Ä–∞—Ç–∏ –ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ',
                'success-title': '–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –≤–∏!',
                'lbl-photos': '–ñ–µ–ª–∞–µ—Ç–µ –ª–∏ —Å–Ω–∏–º–∫–∏ –æ—Ç —Å–≤–∞—Ç–±–∞—Ç–∞?',
                
                // –§—É—Ç—ä—Ä
                'footer-names': '–†–µ–≥–∏–Ω–∞ & –ù–∏–∫–æ–ª–∞–π', 'footer-loc': '06.06.2026 ‚Ä¢ –°–µ–≤–ª–∏–µ–≤–æ',
                
                // –ï–ª–µ–º–µ–Ω—Ç–∏ –Ω–∞ —Ñ–æ—Ä–º–∞—Ç–∞ (Values & Placeholders)
                'opt-g1': '1 –ß–æ–≤–µ–∫', 'opt-g2': '2 –î—É—à–∏', 'opt-g3': '3 –î—É—à–∏', 'opt-g4': '4 –î—É—à–∏', 'opt-g5': '5 –î—É—à–∏',
                'opt-yes': '–° —Ä–∞–¥–æ—Å—Ç —â–µ –ø—Ä–∏—Å—ä—Å—Ç–≤–∞–º–µ! ü•Ç', 'opt-no': '–ó–∞ —Å—ä–∂–∞–ª–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ–º üòû',
                'btn-meat': 'ü•© –ú–µ—Å–Ω–æ', 'btn-veg': 'ü•ó –í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–æ',
                'al-gluten': '–ì–ª—É—Ç–µ–Ω', 'al-lactose': '–õ–∞–∫—Ç–æ–∑–∞', 'al-nuts': '–Ø–¥–∫–∏', 'al-sea': '–ú–æ—Ä—Å–∫–∏ –¥–∞—Ä–æ–≤–µ',
                'ph-guest': '–ò–º–µ –∏ –§–∞–º–∏–ª–∏—è', 
                
                // –¢–£–ö –°–ê –õ–ò–ü–°–í–ê–©–ò–¢–ï –ü–†–ï–í–û–î–ò:
                'input-other': '–î—Ä—É–≥–∏ (–º–æ–ª—è —É—Ç–æ—á–Ω–µ—Ç–µ)...', 
                'input-msg': '–ù–∞–ø–∏—à–µ—Ç–µ –≤–∞—à–µ—Ç–æ –ø–æ–∂–µ–ª–∞–Ω–∏–µ —Ç—É–∫...',
                'photo-email': '–ú–æ–ª—è, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–µ—Ç–µ –í–∞—à–∏—è –∏–º–µ–π–ª –∞–¥—Ä–µ—Å',
                
                // –ß–∞—Ç
                'chat-title': '–°–≤–∞—Ç–±–µ–Ω –ê—Å–∏—Å—Ç–µ–Ω—Ç', 'chat-init': '–ó–¥—Ä–∞–≤–µ–π—Ç–µ! –ò–º–∞—Ç–µ –ª–∏ –≤—ä–ø—Ä–æ—Å–∏?', 'btn-concierge': '–°–≤–∞—Ç–±–µ–Ω –ö–æ–Ω—Å–∏–µ—Ä–∂', 'chat-input': '–í—ä–ø—Ä–æ—Å...'
            },
            'en': {
                'txt-tap': 'Tap to Open',
                'nav-program': 'Program', 'nav-details': 'Details', 'nav-rsvp': 'RSVP',
                'env-names': 'Regina & Nikolai',
                'hero-invite': 'We invite you to our wedding',
                'hero-name-1': 'Regina <span class="italic text-[#1A4D2E] font-light">&</span>',
                'hero-name-2': 'Nikolai',
                'hero-date': 'June 06, 2026',
                'hero-loc': 'Hotel "Hristovi", Sevlievo',
                'cnt-months': 'Months', 'cnt-days': 'Days',
                
                'prog-title': 'Program of the Day',
                'prog-date': 'June 06, 2026',
                'prog-welcome': '<i class="fas fa-info-circle text-[#1A4D2E] mr-2"></i>Guests are welcome after 11:00 AM to check in at the hotel.',
                'ev-bride': 'Picking up the Bride', 'prog-desc-1': 'Traditional start of the celebration.',
                'ev-ritual': 'Wedding Ceremony', 'prog-desc-2': 'The sacred "Yes" under the open sky.',
                'ev-drink': 'Welcome Drinks & Photos', 'prog-desc-3': 'Cheers and photos.',
                'ev-accom': 'Guests Seating', 'prog-desc-4': 'Entering the restaurant.',
                'ev-party': 'Party Time!', 'prog-desc-5': 'Welcoming the newlyweds and party start.',

                'quote-text': '"Love is the only thing that grows<br>when it is shared."',
                'quote-author': 'Antoine de Saint-Exup√©ry',
                'photo-quote': '"We have traveled a long way together, <br class="hidden md:block">and we would be happy for you to share this "stop" with us!"',

                'details-title': 'Important Information',
                'loc-title': 'Location', 'loc-name': 'Hotel "Hristovi"',
                'loc-desc': 'Sevlievo<br>The ceremony and reception are at the same place.', 'loc-nav': 'Navigation',
                'dress-title': 'Dress Code: Cocktail Formal',
                'dress-desc': 'Elegant look, balance between formal and party wear. Cocktail dresses and suits.',
                'dress-warn': '‚ö†Ô∏è Please do not wear yellow',
                'flowers-title': 'Request: No Flowers',
                'flowers-desc': '"Your presence is the greatest gift for us! Since we have provided beautiful flower decoration, we would be grateful if you replace bouquets with support for our future. Let\'s keep the beauty of live flowers in nature."',

                'rsvp-title': 'We are waiting for you!',
                'rsvp-deadline': 'RSVP Deadline: <br><strong>April 1st, 2026</strong>',
                'lbl-guests': 'Number of Guests (Adults)', 'lbl-name': 'Guest Name',
                'lbl-attend': 'Attendance', 'lbl-menu': 'Menu Preference',
                'lbl-allergies': 'Food Allergies', 'lbl-wishes': 'Wishes to the couple',
                'btn-send': 'Send RSVP',
                'success-title': 'Thank You!',
                'lbl-photos': 'Do you want photos from the wedding?',
                
                'footer-names': 'Regina & Nikolai', 'footer-loc': '06.06.2026 ‚Ä¢ Sevlievo',
                
                'opt-g1': '1 Person', 'opt-g2': '2 People', 'opt-g3': '3 People', 'opt-g4': '4 People', 'opt-g5': '5 People',
                'opt-yes': 'We will happyly attend! ü•Ç', 'opt-no': 'Sadly, we cannot make it üòû',
                'btn-meat': 'ü•© Meat', 'btn-veg': 'ü•ó Vegetarian',
                'al-gluten': 'Gluten', 'al-lactose': 'Lactose', 'al-nuts': 'Nuts', 'al-sea': 'Seafood',
                'ph-guest': 'Full Name', 
                
                // –¢–£–ö –°–ê –õ–ò–ü–°–í–ê–©–ò–¢–ï –ü–†–ï–í–û–î–ò (EN):
                'input-other': 'Other (please specify)...', 
                'input-msg': 'Write your wishes here...',
                'photo-email': 'Please provide your email address',
                
                'chat-title': 'Wedding Assistant', 'chat-init': 'Hello! Do you have any questions?', 'btn-concierge': 'Wedding Concierge', 'chat-input': 'Question...'
            }
        };

        // –§—É–Ω–∫—Ü–∏—è –∑–∞ —Å–º—è–Ω–∞ –Ω–∞ –µ–∑–∏–∫–∞ –∏ –ø—Ä–µ–∑–∞—Ä–µ–∂–¥–∞–Ω–µ
        function changeLanguage(lang) {
            localStorage.setItem('wedding_lang', lang);
            location.reload();
        }

        // –ü—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ - –ø—Ä–∏–ª–∞–≥–∞–Ω–µ –Ω–∞ –ø—Ä–µ–≤–æ–¥–∏
        document.addEventListener("DOMContentLoaded", function() {
            const currentLang = localStorage.getItem('wedding_lang') || 'bg';
            const texts = translations[currentLang];
            
            // –ü—Ä–µ–≤–æ–¥ –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –∏ placeholders
            for (const [id, text] of Object.entries(texts)) {
                const element = document.getElementById(id);
                if (element) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = text;
                    } else {
                        element.innerHTML = text;
                    }
                }
            }
            
            // –°–ø–µ—Ü–∏–∞–ª–Ω–æ –∑–∞ –¥–∏–Ω–∞–º–∏—á–Ω–∏—Ç–µ –ø–æ–ª–µ—Ç–∞ –∑–∞ –∏–º–µ –Ω–∞ –≥–æ—Å—Ç
            const guestPlaceholder = texts['ph-guest'];
            document.querySelectorAll('.guest-name-input').forEach(input => {
                input.placeholder = guestPlaceholder;
            });
        });

        // === 2. –õ–û–ì–ò–ö–ê –ó–ê –ü–õ–ò–ö–ê –ò –ú–£–ó–ò–ö–ê–¢–ê ===
        function openEnvelope() {
            const wrapper = document.getElementById('envelope-wrapper');
            const overlay = document.getElementById('envelope-overlay');
            const mainContent = document.getElementById('main-content');
            const musicControl = document.getElementById('music-control');
            const navbar = document.getElementById('navbar');
            const heroContent = document.getElementById('hero-content');
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞ –æ—Ç–≤–∞—Ä—è–Ω–µ
            wrapper.classList.add('open');
            
            // –û–ø–∏—Ç –∑–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –º—É–∑–∏–∫–∞—Ç–∞
            const music = document.getElementById('bg-music');
            music.volume = 0.5;
            
            // Promise –∑–∞ play, –∑–∞ –¥–∞ —Ö–≤–∞–Ω–µ–º –≥—Ä–µ—à–∫–∏ –∞–∫–æ –±—Ä–∞—É–∑—ä—Ä—ä—Ç –±–ª–æ–∫–∏—Ä–∞
            const playPromise = music.play();
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    // –£—Å–ø–µ—à–Ω–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ - —Å–≤–µ—Ç–≤–∞–º–µ –±—É—Ç–æ–Ω–∞
                    const btn = document.getElementById('music-btn');
                    if(btn) btn.classList.add('playing-animation');
                })
                .catch(error => {
                    console.log("Auto-play blocked by browser. User needs to interact.", error);
                    // –ú—É–∑–∏–∫–∞—Ç–∞ –µ –±–ª–æ–∫–∏—Ä–∞–Ω–∞, –Ω–æ —Å–∞–π—Ç—ä—Ç —â–µ –ø—Ä–æ–¥—ä–ª–∂–∏ –¥–∞ —Ä–∞–±–æ—Ç–∏
                });
            }

            // –°–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –ø–ª–∏–∫–∞ –∏ –ø–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ —Å–∞–π—Ç–∞
            setTimeout(() => {
                overlay.style.opacity = '0';
                setTimeout(() => {
                    overlay.style.display = 'none';
                    document.body.style.overflowY = 'auto'; // –†–∞–∑—Ä–µ—à–∞–≤–∞–º–µ —Å–∫—Ä–æ–ª–≤–∞–Ω–µ—Ç–æ
                    mainContent.style.opacity = '1';
                    musicControl.style.opacity = '1'; 
                    navbar.style.opacity = '1';
                    heroContent.style.transform = 'translateY(0)';
                    checkTimelineScroll();
                }, 1200);
            }, 1500);
        }

        function toggleMusic() {
            const m = document.getElementById('bg-music');
            const b = document.getElementById('music-btn');
            
            if (m.paused) {
                m.play();
                b.classList.add('playing-animation');
                b.innerHTML = '<span id="music-icon"><i class="fas fa-volume-up"></i></span>';
            } else {
                m.pause();
                b.classList.remove('playing-animation');
                b.innerHTML = '<span id="music-icon"><i class="fas fa-volume-mute"></i></span>';
            }
        }

        // === 3. –°–ö–†–û–õ –ê–ù–ò–ú–ê–¶–ò–ò ===
        window.addEventListener('scroll', checkTimelineScroll);
        function checkTimelineScroll() {
            const items = document.querySelectorAll('.timeline-item, .fade-in-element');
            const triggerBottom = window.innerHeight / 5 * 4;
            items.forEach(item => { 
                if(item.getBoundingClientRect().top < triggerBottom) {
                    item.classList.add('visible'); 
                }
            });
        }

        // === 4. –§–û–†–ú–ê –ó–ê –ü–û–¢–í–™–†–ñ–î–ï–ù–ò–ï (RSVP) ===
        function generateNameFields() {
            const count = document.getElementById('guest-count').value;
            const container = document.getElementById('names-container');
            const currentLang = localStorage.getItem('wedding_lang') || 'bg';
            const placeholderText = translations[currentLang]['ph-guest'];
            const labelText = currentLang === 'bg' ? '–ò–º–µ –Ω–∞ –≥–æ—Å—Ç' : 'Guest Name';
            
            container.innerHTML = '';
            for (let i = 1; i <= count; i++) {
                container.innerHTML += `<div><label class="block text-xs font-bold uppercase tracking-wider text-gray-500 mb-2">${labelText} ${i}</label><input type="text" class="form-input guest-name-input" placeholder="${placeholderText}" required></div>`;
            }
        }

        let selectedMeal = '';
        function selectMeal(btn, type) {
            document.querySelectorAll('.meal-btn').forEach(b => { 
                b.classList.remove('bg-[#1A4D2E]', 'text-white'); 
                b.classList.add('bg-white', 'text-gray-800'); 
            });
            btn.classList.remove('bg-white', 'text-gray-800'); 
            btn.classList.add('bg-[#1A4D2E]', 'text-white');
            
            const currentLang = localStorage.getItem('wedding_lang') || 'bg';
            if(type === 'meat') selectedMeal = currentLang === 'bg' ? "–ú–µ—Å–Ω–æ" : "Meat"; 
            if(type === 'veg') selectedMeal = currentLang === 'bg' ? "–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–æ" : "Vegetarian";
        }

        // –ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ —Ñ–æ—Ä–º–∞—Ç–∞ (Formspree)
        document.getElementById('rsvp-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formspreeEndpoint = "https://formspree.io/f/mqepbrwv"; // –¢–≤–æ—è—Ç –ª–∏–Ω–∫

            const count = document.getElementById('guest-count').value;
            const att = document.getElementById('attendance-select').value;
            // –ò–∑–ø–æ–ª–∑–≤–∞–º–µ 'input-msg', –∑–∞—â–æ—Ç–æ —Ç–æ–≤–∞ ID –µ —Å–ª–æ–∂–µ–Ω–æ –ø—ä—Ä–≤–æ –≤ HTML-–∞
            const msg = document.getElementById('input-msg').value; 
            const emailPhotos = document.getElementById('photo-email').value;
            
            let names = []; 
            document.querySelectorAll('.guest-name-input').forEach(i => names.push(i.value));
            
            let allergies = []; 
            document.querySelectorAll('.allergy-check:checked').forEach(c => allergies.push(c.value));
            // –ò–∑–ø–æ–ª–∑–≤–∞–º–µ 'input-other', –∑–∞—â–æ—Ç–æ —Ç–æ–≤–∞ ID –µ —Å–ª–æ–∂–µ–Ω–æ –ø—ä—Ä–≤–æ –≤ HTML-–∞
            const other = document.getElementById('input-other').value; 
            if(other) allergies.push(other);
            
            const btn = this.querySelector('button[type="submit"]');
            const originalBtnText = btn.innerText;
            btn.innerText = "Processing...";
            btn.disabled = true;

            const data = {
                "–°—Ç–∞—Ç—É—Å": att === 'yes' ? 'YES' : 'NO',
                "–ë—Ä–æ–π –≥–æ—Å—Ç–∏": count,
                "–ò–º–µ–Ω–∞": names.join(', '),
                "–ú–µ–Ω—é": selectedMeal || 'Not Selected',
                "–ê–ª–µ—Ä–≥–∏–∏": allergies.join(', ') || 'None',
                "–ò–º–µ–π–ª –∑–∞ —Å–Ω–∏–º–∫–∏": emailPhotos || 'Not Provided',
                "–ü–æ–∂–µ–ª–∞–Ω–∏–µ": msg
            };

            fetch(formspreeEndpoint, {
                method: "POST",
                headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => {
                if (response.ok) {
                    document.getElementById('rsvp-form').style.display = 'none';
                    document.getElementById('rsvp-success').classList.remove('hidden');
                    if (typeof updateChartsWithNewData === "function") {
                        updateChartsWithNewData(att);
                    }
                } else {
                    alert("Error sending form. Please try again.");
                    btn.innerText = originalBtnText;
                    btn.disabled = false;
                }
            })
            .catch(error => {
                alert("Connection error.");
                btn.innerText = originalBtnText;
                btn.disabled = false;
            });
        });

        // === 5. –¢–ê–ô–ú–ï–† ===
        const weddingDate = new Date("Jun 06, 2026 15:00:00").getTime();
        function updateTimer() {
            const now = new Date().getTime(); 
            const d = weddingDate - now;
            const daysTotal = Math.floor(d / (1000 * 60 * 60 * 24));
            
            const elMajor = document.getElementById('count-major');
            const elMinor = document.getElementById('count-minor');
            
            if (daysTotal > 30) {
                if(elMajor) elMajor.innerText = Math.floor(daysTotal / 30.44);
                if(elMinor) elMinor.innerText = Math.floor(daysTotal % 30.44);
            } else {
                if(elMajor) elMajor.innerText = daysTotal;
                if(elMinor) elMinor.innerText = Math.floor((d % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            }
        }
        setInterval(updateTimer, 1000); 
        updateTimer();

        // === 6. –ù–ê–í–ò–ì–ê–¶–ò–Ø –ò –ß–ê–¢ ===
        function navigateTo(id) { 
            const el = document.getElementById(id); 
            if (el) window.scrollTo({ top: el.getBoundingClientRect().top + window.pageYOffset - 80, behavior: "smooth" }); 
        }
        function scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); }
        
        function toggleChat() { document.getElementById('ai-chat-window').classList.toggle('hidden'); }

        // === 7. GEMINI AI CHAT ===
        const apiKey = "AIzaSyBCV708gDyiptyHI1XB1u1fzyoRVuo6KsE"; 
        
        async function callGemini(p, s="") { 
            const r = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`, {
                method:'POST', 
                headers:{'Content-Type':'application/json'}, 
                body:JSON.stringify({contents:[{parts:[{text:p}]}], systemInstruction:{parts:[{text:s}]}})
            }); 
            const d = await r.json(); 
            return d.candidates[0].content.parts[0].text; 
        }

        async function handleChatSubmit(e) {
            e.preventDefault();
            const input = document.getElementById('chat-input');
            const container = document.getElementById('chat-messages');
            const question = input.value.trim();
            
            if (!question) return;

            container.innerHTML += `
                <div class="flex justify-end mb-2">
                    <div class="bg-[#1A4D2E] text-white p-3 rounded-lg rounded-tr-none shadow-sm max-w-[85%] text-right text-sm">
                        ${question}
                    </div>
                </div>`;
            input.value = "";
            container.scrollTop = container.scrollHeight;

            const loadingId = "loading-" + Date.now();
            container.innerHTML += `
                <div id="${loadingId}" class="flex justify-start mb-2">
                    <div class="bg-gray-100 text-gray-500 p-3 rounded-lg rounded-tl-none text-xs italic">
                        ...
                    </div>
                </div>`;
            container.scrollTop = container.scrollHeight;

            // –¢–≤–æ—è—Ç –ø—ä–ª–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç (–∑–∞–ø–∞–∑–µ–Ω)
            const weddingContext = `
                –¢–ò –°–ò: –õ—é–±–µ–∑–µ–Ω –∏ –∏–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–µ–Ω —Å–≤–∞—Ç–±–µ–Ω –∞—Å–∏—Å—Ç–µ–Ω—Ç –∑–∞ —Å–≤–∞—Ç–±–∞—Ç–∞ –Ω–∞ –†–µ–≥–∏–Ω–∞ –∏ –ù–∏–∫–æ–ª–∞–π.
                –¶–ï–õ: –î–∞ –æ—Ç–≥–æ–≤–∞—Ä—è—à –Ω–∞ –≤—ä–ø—Ä–æ—Å–∏ –Ω–∞ –≥–æ—Å—Ç–∏—Ç–µ, –∏–∑–ø–æ–ª–∑–≤–∞–π–∫–∏ –°–ê–ú–û –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–µ–Ω–∞—Ç–∞ –ø–æ-–¥–æ–ª—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.

                --- –ò–ù–§–û–†–ú–ê–¶–ò–Ø –ó–ê –°–™–ë–ò–¢–ò–ï–¢–û ---
                –î–ê–¢–ê: 06.06.2026 –≥–æ–¥–∏–Ω–∞ (6-—Ç–∏ —é–Ω–∏ 2026).
                –õ–û–ö–ê–¶–ò–Ø: –ö–æ–º–ø–ª–µ–∫—Å "–•—Ä–∏—Å—Ç–æ–≤–∏", –≥—Ä. –°–µ–≤–ª–∏–µ–≤–æ. (–†–∏—Ç—É–∞–ª—ä—Ç –∏ —Ç—ä—Ä–∂–µ—Å—Ç–≤–æ—Ç–æ —Å–∞ –Ω–∞ –µ–¥–Ω–æ –º—è—Å—Ç–æ).
                –ù–ê–°–¢–ê–ù–Ø–í–ê–ù–ï: –ì–æ—Å—Ç–∏—Ç–µ —Å–∞ –¥–æ–±—Ä–µ –¥–æ—à–ª–∏ –≤ –∫–æ–º–ø–ª–µ–∫—Å–∞ —Å–ª–µ–¥ 12:00 —á–∞—Å–∞ –Ω–∞ –æ–±—è–¥, –∑–∞ –¥–∞ —Å–µ –Ω–∞—Å—Ç–∞–Ω—è—Ç —Å–ø–æ–∫–æ–π–Ω–æ.
                
                –ü–†–û–ì–†–ê–ú–ê –ù–ê –î–ï–ù–Ø:
                - 15:00 —á. - –í–∑–∏–º–∞–Ω–µ –Ω–∞ –±—É–ª–∫–∞—Ç–∞ (–µ–º–æ—Ü–∏–æ–Ω–∞–ª–Ω–æ –Ω–∞—á–∞–ª–æ).
                - 16:30 —á. - –ò–∑–Ω–µ—Å–µ–Ω —Ä–∏—Ç—É–∞–ª (–∑–∞–≤–µ—Ç–Ω–æ—Ç–æ "–î–∞" –ø–æ–¥ –æ—Ç–∫—Ä–∏—Ç–æ –Ω–µ–±–µ).
                - 17:30 —á. - Welcome Drink –∏ –§–æ—Ç–æ—Å–µ—Å–∏—è —Å –º–ª–∞–¥–æ–∂–µ–Ω—Ü–∏—Ç–µ.
                - 18:30 —á. - –ù–∞—Å—Ç–∞–Ω—è–≤–∞–Ω–µ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—Ç–∞.
                - 19:00 —á. - –ü–∞—Ä—Ç–∏, –∑–∞—Ö—Ä–∞–Ω–≤–∞–Ω–µ –∏ –Ω–∞—á–∞–ª–æ –Ω–∞ –∫—É–ø–æ–Ω–∞.

                –î–†–ï–° –ö–û–î (–û–ë–õ–ï–ö–õ–û):
                - –¢–∏–ø: Cocktail Formal.
                - –û–ø–∏—Å–∞–Ω–∏–µ: –ï–ª–µ–≥–∞–Ω—Ç–Ω–æ –æ–±–ª–µ–∫–ª–æ. –ö–æ–∫—Ç–µ–π–ª–Ω–∏ —Ä–æ–∫–ª–∏ –∑–∞ –¥–∞–º–∏—Ç–µ, –∫–æ—Å—Ç—é–º–∏ –∑–∞ –≥–æ—Å–ø–æ–¥–∞—Ç–∞.
                - –í–ê–ñ–ù–û –û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï: –ú–æ–ª–∏–º –≥–æ—Å—Ç–∏—Ç–µ –¥–∞ –ù–ï –Ω–æ—Å—è—Ç –ñ–™–õ–¢–û (—Ç–æ–≤–∞ –µ –∑–∞–ø–∞–∑–µ–Ω —Ü–≤—è—Ç –∏–ª–∏ –ª–∏—á–Ω–∞ –º–æ–ª–±–∞).
                - –¶–≤–µ—Ç–æ–≤–∞ –ø–∞–ª–∏—Ç—Ä–∞ –Ω–∞ —Å–≤–∞—Ç–±–∞—Ç–∞: –ß–µ—Ä–Ω–æ, –¢—ä–º–Ω–æ –∑–µ–ª–µ–Ω–æ, –°–∏–≤–æ, –ú–ª–µ—á–Ω–æ –±—è–ª–æ.

                –ü–û–î–ê–†–™–¶–ò –ò –¶–í–ï–¢–Ø:
                - –¶–í–ï–¢–Ø: –ú–æ–ª–∏–º –±–µ–∑ –±—É–∫–µ—Ç–∏ –æ—Ç —Ä—è–∑–∞–Ω —Ü–≤—è—Ç. –ò–º–∞–º–µ –æ—Å–∏–≥—É—Ä–µ–Ω–∞ –±–æ–≥–∞—Ç–∞ —Ü–≤–µ—Ç–Ω–∞ –¥–µ–∫–æ—Ä–∞—Ü–∏—è –∏ –Ω–µ –∏—Å–∫–∞–º–µ –¥–∞ —É–≤—è—Ö–≤–∞—Ç –Ω–∞–ø—Ä–∞–∑–Ω–æ.
                - –ü–û–î–ê–†–™–¶–ò: –í–º–µ—Å—Ç–æ —Ü–≤–µ—Ç—è, –≥–æ—Å—Ç–∏—Ç–µ –º–æ–≥–∞—Ç –¥–∞ –¥–æ–±–∞–≤—è—Ç —Å—É–º–∞—Ç–∞ –∫—ä–º –ø–æ–¥–∞—Ä—ä–∫–∞ —Å–∏ (–ø–æ–¥–∫—Ä–µ–ø–∞ –∑–∞ –±—ä–¥–µ—â–µ—Ç–æ –Ω–∞ —Å–µ–º–µ–π—Å—Ç–≤–æ—Ç–æ).

                RSVP (–ü–û–¢–í–™–†–ñ–î–ï–ù–ò–ï):
                - –ö—Ä–∞–µ–Ω —Å—Ä–æ–∫: 1-–≤–∏ –ê–ø—Ä–∏–ª 2026 –≥–æ–¥–∏–Ω–∞.
                - –ù–∞—á–∏–Ω: –ß—Ä–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∞ –≤ —Å–∞–π—Ç–∞.
                - –ú–µ–Ω—é: –ü—Ä–µ–¥–ª–∞–≥–∞–º–µ –ú–µ—Å–Ω–æ –∏ –í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–æ –º–µ–Ω—é. –ò–º–∞ –æ–ø—Ü–∏—è –∑–∞ –æ—Ç–±–µ–ª—è–∑–≤–∞–Ω–µ –Ω–∞ –∞–ª–µ—Ä–≥–∏–∏.

                –ö–û–ù–¢–ê–ö–¢–ò:
                - –ú–ª–∞–¥–æ–∂–µ–Ω—Ü–∏: –†–µ–≥–∏–Ω–∞ –∏ –ù–∏–∫–æ–ª–∞–π.
                - –ò–º–µ–π–ª –∑–∞ –≤—ä–ø—Ä–æ—Å–∏: nikolai.nikolaev11@gmail.com

                --- –ò–ù–°–¢–†–£–ö–¶–ò–ò –ó–ê –û–¢–ì–û–í–û–† ---
                1. –ê–∫–æ –≤—ä–ø—Ä–æ—Å—ä—Ç –µ –∑–∞ —á–∞—Å, –º—è—Å—Ç–æ, –¥—Ä–µ—Å –∫–æ–¥ –∏–ª–∏ –ø–æ–¥–∞—Ä—ä—Ü–∏ -> –æ—Ç–≥–æ–≤–æ—Ä–∏ –¥–∏—Ä–µ–∫—Ç–Ω–æ —Å –≥–æ—Ä–Ω–∞—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.
                2. –ê–∫–æ –ø–∏—Ç–∞—Ç "–ö–∞–∫–≤–æ –¥–∞ –æ–±–ª–µ–∫–∞?" -> –∫–∞–∂–∏ –∑–∞ Cocktail Formal –∏ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ —Å–ø–æ–º–µ–Ω–∏ –∑–∞–±—Ä–∞–Ω–∞—Ç–∞ –∑–∞ –∂—ä–ª—Ç–æ.
                3. –ê–∫–æ –ø–∏—Ç–∞—Ç –∑–∞ —Ü–≤–µ—Ç—è -> –æ–±—è—Å–Ω–∏ —É—á—Ç–∏–≤–æ –º–æ–ª–±–∞—Ç–∞ –¥–∞ –Ω–µ —Å–µ –Ω–æ—Å—è—Ç.
                4. –ê–∫–æ –≤—ä–ø—Ä–æ—Å—ä—Ç –µ —Å—Ç—Ä–∞–Ω–∏—á–µ–Ω (–Ω–∞–ø—Ä. "–ö–∞–∫–≤–æ –µ –≤—Ä–µ–º–µ—Ç–æ?"), –æ—Ç–≥–æ–≤–æ—Ä–∏ —É—á—Ç–∏–≤–æ, –Ω–æ —Å–≤—ä—Ä–∂–∏ –æ—Ç–≥–æ–≤–æ—Ä–∞ —Å—ä—Å —Å–≤–∞—Ç–±–∞—Ç–∞ (–Ω–∞–ø—Ä. "–ù–∞–¥—è–≤–∞–º–µ —Å–µ –Ω–∞ —Å–ª—ä–Ω—á–µ–≤–æ –≤—Ä–µ–º–µ –∑–∞ —Ä–∏—Ç—É–∞–ª–∞ –Ω–∞ –æ—Ç–∫—Ä–∏—Ç–æ").
                5. –ì–æ–≤–æ—Ä–∏ –Ω–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –µ–∑–∏–∫, —É—á—Ç–∏–≤–æ –∏ –ø—Ä–∏–ø–æ–≤–¥–∏–≥–Ω–∞—Ç–æ.
            `;

            try {
                const answer = await callGemini(question, weddingContext);
                document.getElementById(loadingId).remove();
                
                container.innerHTML += `
                    <div class="flex justify-start mb-2">
                        <div class="bg-white border border-gray-200 text-gray-800 p-3 rounded-lg rounded-tl-none shadow-sm max-w-[90%] text-sm leading-relaxed">
                            ${answer}
                        </div>
                    </div>`;
            } catch (err) {
                document.getElementById(loadingId).remove();
                container.innerHTML += `<div class="text-xs text-red-500">–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ.</div>`;
            }
            container.scrollTop = container.scrollHeight;
        }

        // === 8. ADMIN / DEV MODE ===
        const modeToggle = document.getElementById('mode-toggle'); 
        const viewInvite = document.getElementById('view-invite'); 
        const viewReport = document.getElementById('view-report');
        let isDevMode = false;
        
        if(modeToggle) {
            modeToggle.addEventListener('click', () => {
                isDevMode = !isDevMode;
                if(isDevMode) { 
                    viewInvite.classList.add('hidden'); 
                    document.getElementById('footer').classList.add('hidden'); 
                    viewReport.classList.remove('hidden'); 
                    modeToggle.classList.add('bg-[#1A4D2E]'); 
                    renderCharts(); 
                } else { 
                    viewReport.classList.add('hidden'); 
                    document.getElementById('footer').classList.remove('hidden'); 
                    viewInvite.classList.remove('hidden'); 
                    modeToggle.classList.remove('bg-[#1A4D2E]'); 
                }
            });
        }
        
        // Functions for charts/vows
        async function generateVows() { const t = document.getElementById('vow-topic').value; const r = await callGemini(`Wedding vow: ${t}`, "Language: Bulgarian"); document.getElementById('vow-output').innerText = r; }
        let rsvpChartInstance = null;
        function renderCharts() { if(rsvpChartInstance) return; rsvpChartInstance = new Chart(document.getElementById('rsvpChart'), {type:'bar', data:{labels:['Yes','No'], datasets:[{label:'Guests',data:[0,0],backgroundColor:'#1A4D2E'}]}, options:{responsive:true,maintainAspectRatio:false}}); }
        function updateChartsWithNewData(a) { if(!rsvpChartInstance) return; if(a==='yes') rsvpChartInstance.data.datasets[0].data[0]++; else rsvpChartInstance.data.datasets[0].data[1]++; rsvpChartInstance.update(); }
    </script>
</body>
</html>
